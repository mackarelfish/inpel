{% extends 'base.html' %}

{% block header %}{% endblock %}
{% block title %}User Panel{% endblock %}

{% block content %}
    <div class="panel">
        <div class="panel__sidebar">
            <ul>
                <li data-tab-target="#profile" class="pael__sideitems active">
                    My Profile
                </li>
                <li data-tab-target="#organism" class="panel__sideitems">
                    My Organism
                </li>
                <li data-tab-target="#input" class="panel__sideitems">
                    New Input Data
                </li>
                {% if params.isAdmin %}
                <li data-tab-target="#newuser" class="panel__sideitems">
                    Add User
                </li>
                {% endif %}
            </ul>
        </div>
        <nav>
            {% include '/modules/navigation.html' %}
        </nav>
        <div class="panel__contentcontainer">
            <div id="organism" class="panel__content" data-tab-content>
                <h1>My organisms</h1>
                <p>You have {{ hits | length }} organism regiestered</p>
                {% for hit in hits %}
                <div class="post__item">
                    <img class="post__itemimage" src="{{url_for('static', filename='img/img__placeholder.png')}}" alt="">
                    <div class="post__itemcaption">
                        {% filter lower %}
                        <h3><i>{{hit['scientificName']}}</i></h3>
                        <p>{{hit['commonName']}}</p>
                        {% endfilter %}
                        <p>{{hit['province']}}</p>
                        <a href="">Edit</a>
                    </div>
                </div>
                <div class="post__divider"></div>
                {% endfor %}
            </div>

            <div id="profile" class="panel__content active" data-tab-content>
                <h1>Welcome back {{ params.fullname }}</h1>
                <p>Username : {{params.username}}</p>
                <p>Email : {{params.email}}</p>
                <p>Affiliation : {{params.affiliation}}</p>
            </div>

            <div id="input" class="panel__content" data-tab-content>
                <h1>New Data Input</h1>
                <form method="POST" action="/dashboard">
                    <label class="panel__formlabel">Common Name</label>
                    <input type="text" name="commonName" placeholder="Common name..">
                    <label class="panel__formlabel">Scientific Name</label>
                    <input type="text" name="scientificName" placeholder="Scientific name..">
                    <label class="panel__formlabel">Location</label>
                    <input type="text" name="location" placeholder="Insert coordinates..">
                    <input type="text" name="locationRadius" placeholder="Insert radius (km)..">
                    <select name="province">
                        <option value="" disabled selected>Select province</option>
                        {% for loc in location %}
                            <option value="{{loc}}">{{loc}}</option>
                        {% endfor %}
                    </select>
                    <label class="panel__formlabel">Extract Yield</label>
                    <input type="text" name="extractYield" placeholder="Extract yield..">
                    <label class="panel__formlabel">Phytochemical Content</label>
                    <input type="text" name="phytochemicalContent" placeholder="Phytochemical content..">
                    <label class="panel__formlabel">Antioxidant Activity</label>
                    <input type="text" name="antioxidantActivity" placeholder="Antioxidant activity..">
                    <label class="panel__formlabel">Antibacterial Activity</label>
                    <input type="text" name="antibacterialActivity" placeholder="Antibacterial activity..">
                    <label class="panel__formlabel">Anticancer Activity</label>
                    <input type="text" name="anticancerActivity" placeholder="Anticancer activity..">
                    <label class="panel__formlabel">Metabolomics</label>
                    <input type="text" name="metabolomics" placeholder="Metabolomics..">
                    <label class="panel__formlabel">Structure Euclidation</label>
                    <input type="text" name="structureElucidation" placeholder="Structure elucidation..">
                    <label class="panel__formlabel">BioAssay</label>
                    <input type="text" name="bioassay" placeholder="BioAssay..">
                    <label class="panel__formlabel">Research Paper</label>
                    <input type="text" name="researchPapers" placeholder="Research Papers..">
                    <input type="submit" value="Submit">
                </form>
            </div>
            {% if params.isAdmin %}
            <div id="newuser" class="panel__content" data-tab-content>
                <h1>adduser</h1>
            </div>
            {% endif %}
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script type="text/javascript">
        let tabs = document.querySelectorAll('[data-tab-target]')
        let tabContents = document.querySelectorAll('[data-tab-content]')

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                let target = document.querySelector(tab.dataset.tabTarget)

                tabContents.forEach(tabContent => {
                    tabContent.classList.remove('active')
                })
                tabs.forEach(tab => {
                    tab.classList.remove('active')
                })

                target.classList.add('active')
                tab.classList.add('active')
            })
        })
    </script>
{% endblock %}